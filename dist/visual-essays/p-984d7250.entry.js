import{r as t,c as i,h as e,g as s}from"./p-f5d08bd3.js";import{g as a,s as l,i as n,e as d,f as o,d as r,h as c,t as h,j as p,k as g}from"./p-c262ddd9.js";import"./p-0cf2cd84.js";import{k as m}from"./p-7059461a.js";import"./p-ab5a67a8.js";import"./p-7a9c1438.js";m("3333"===location.port?"":"https://visual-essays.github.io/web-components/src");const u=class{constructor(e){t(this,e),this.prominentToggled=i(this,"prominentToggled",7),this.droToggled=i(this,"droToggled",7),this.entityRemoved=i(this,"entityRemoved",7),this.depicted=[],this.format="default",this.editable=!1,this.entityData={},this.entityDataInSync=!1}async connectedCallback(){this.manifest?(this._manifest=await a(this.manifest),this.imageHash=l(n(this._manifest).id),this.depicted=await d(this.imageHash)):this.depicted&&this.getEntityData()}async depictedChanged(){this.getEntityData()}async getEntityData(){this.entityDataInSync=!1,this.entityData=await o(this.depicted.map((t=>t.id))),this.entityDataInSync=!0}async refresh(t){this.depicted=t,this.getEntityData()}toggleDro(t){this.droToggled.emit(t)}toggleProminent(t){this.prominentToggled.emit(t)}removeEntity(t){this.entityRemoved.emit(t)}async edit(){let t=this.el.shadowRoot.querySelector("ve-depicts-dialog");t.show=!t.show}label(t){var i;return null===(i=this.entityData[t])||void 0===i?void 0:i.label}defaultFormat(){return e("div",{class:"depicted-entities"},e("ul",null,this.depicted.map((t=>e("li",null,e("a",{href:`https://www.wikidata.org/entity/${t.id}`,innerHTML:this.label(t.id)}))))),this.editable?e("ve-depicts-dialog",{depicted:this.depicted,label:r(this._manifest),summary:c(this._manifest),thumbnail:h(this._manifest),imageHash:this.imageHash,source:p(this._manifest),sourceId:g(this._manifest)}):null)}tableFormat(){return e("div",null,e("ul",{class:"depicted-entities table"},e("li",{class:"header"},e("div",{class:"label"},"Entity"),e("div",{class:"dro"},"Digital representation of"),e("div",{class:"prominent"},"Prominent"),e("div",{class:"controls"})),this.depicted.map((t=>e("li",null,e("div",{class:"label",innerHTML:this.label(t.id)}),e("div",{class:"dro"},e("input",{type:"checkbox",id:"dro",name:"dro",checked:t.dro,onClick:this.toggleDro.bind(this,t.id)})),e("div",{class:"prominent"},e("input",{type:"checkbox",id:"prominent",name:"prominent",checked:t.prominent,onClick:this.toggleProminent.bind(this,t.id)})),e("div",{class:"controls"},e("sl-tooltip",{content:"Remove entity"},e("sl-icon-button",{onClick:this.removeEntity.bind(this,t.id),id:"remove-icon",name:"trash",label:"Remove entity"}))))))))}cardsFormat(){return e("div",{class:"depicted-entities cards"},e("ul",null,this.depicted.map((t=>{var i,s,a;return e("li",null,e("div",{class:"card"},e("img",{src:null===(i=this.entityData[t.id])||void 0===i?void 0:i.thumbnail}),e("div",null,e("a",{class:"label",href:`https://www.wikidata.org/entity/${t.id}`,innerHTML:null===(s=this.entityData[t.id])||void 0===s?void 0:s.label}),e("span",{class:"description",innerHTML:null===(a=this.entityData[t.id])||void 0===a?void 0:a.description}))))}))))}render(){return this.entityDataInSync?"table"===this.format?this.tableFormat():"cards"===this.format?this.cardsFormat():this.defaultFormat():null}get el(){return s(this)}static get watchers(){return{depicted:["depictedChanged"]}}};u.style=":host{font-family:Roboto, sans-serif}*{box-sizing:border-box}.depicted-entities ul{margin:12px 0 0 0}.cards ul{padding:12px;list-style:none}.cards li{padding:6px}.card{display:flex;align-items:center;gap:12px}.card img{max-width:80px;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)}.card div{display:flex;flex-direction:column;align-self:flex-start;gap:6px}.card div{display:flex;flex-direction:column;align-self:flex-start;gap:6px}.card .label{text-decoration:none;font-size:1.1em;font-weight:bold;color:black}.card .label:hover{text-decoration:underline}ul.depicted-entities.table{padding:0;list-style:none;overflow-y:scroll}.depicted-entities.table li{display:flex;align-items:center;justify-content:center;gap:18px}.depicted-entities.table li>*{flex:1;text-align:center;padding:6px 0}.header{border-bottom:2px solid black}.depicted-entities.table .header div.label{text-align:center;min-width:30%}.depicted-entities.table div.label{text-align:left;min-width:30%}.controls{display:flex;align-items:center;justify-content:right;gap:18px}.controls button{cursor:pointer}.control label{margin-bottom:0}";export{u as ve_depicts}