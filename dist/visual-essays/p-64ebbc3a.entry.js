import{r as t,h as e,g as i}from"./p-f5d08bd3.js";import{i as o,a as n,p as s,g as r}from"./p-a12c2e8f.js";import"./p-7a9c1438.js";const a={home:"house-fill",about:"info-circle-fill",contact:"envelope-fill"},l=class{constructor(e){t(this,e),this.height=300,this.position="center",this.navItems=[]}_manifestChanged(t,e){t!==e&&(this._imageInfo=o(this._manifest))}async _imageInfoChanged(t,e){t!==e&&(this._imgUrl=t.service?this._iiifUrl(t.service[0].id||t.service[0]["@id"],this.imageOptions):await n(t.id,this.imageOptions.region,{width:this.el.clientWidth,height:this.height}))}async _imgUrlChanged(t){this.el.style.backgroundImage=`url('${t}')`,this.el.style.backgroundPosition=this.position}_iiifUrl(t,e){return`${t.replace(/\/info.json$/,"")}/${e.region}/${e.size}/${e.rotation}/${e.quality}.${e.format}`}connectedCallback(){if(this.label){let t=document.querySelector("title");t||(t=document.createElement("title"),t.innerText=this.label,document.head.appendChild(t))}for(this.imageOptions=s(this.options),this.navItems=Array.from(this.el.querySelectorAll("li")).map((t=>"A"===t.firstChild.nodeName?{label:t.firstChild.textContent,href:t.firstChild.href}:{label:t.firstChild.textContent}));this.el.firstChild;)this.el.removeChild(this.el.firstChild)}componentDidLoad(){this.el.style.height=`${this.height}px`,this.sticky&&(this.el.classList.add("sticky"),document.querySelector("main").classList.add("sticky-header")),r(this.background).then((t=>this._manifest=t))}htmlToElem(t){return(new DOMParser).parseFromString(t,"text/html").children[0].children[1]}_showInfoPopup(){let t=this.el.shadowRoot.querySelector("#image-info-popup"),e=encodeURIComponent(JSON.stringify([{manifest:this._manifest}]));t.innerHTML=`<ve-manifest images="${e}" condensed></ve-manifest>`,t.style.display="block"===t.style.display?"none":"block"}menuItemSelected(t){if(console.log("menuItemSelected",t),0===t.label.toLowerCase().indexOf("contact")&&this.contact){let t=this.el.shadowRoot.querySelector("ve-contact");t.show=!t.show}else t.href&&(location.href=t.href)}navIcon(t){let e="",i=t.label.toLowerCase();return Object.keys(a).forEach((t=>{i.indexOf(t)>=0&&(e=a[t])})),e}render(){return[e("section",{class:"ve-header"},e("div",{class:"title-panel"},this.navItems.length>0&&e("nav",null,e("sl-dropdown",null,e("sl-button",{id:"menu-toggle",slot:"trigger",variant:"default",size:"medium",circle:!0},e("sl-icon",{name:"three-dots-vertical",label:"Navigation Meno"})),e("sl-menu",null,this.navItems.map((t=>e("sl-menu-item",{onClick:this.menuItemSelected.bind(this,t)},e("sl-icon",{slot:"prefix",name:this.navIcon(t),label:t.label}),t.label)))))),e("a",{href:"/"},e("div",{class:"title"},this.label)),e("div",{class:"subtitle"},this.subtitle),e("div",{id:"image-info-popup"}),e("div",{class:"title-buttons"},e("ve-search",{cx:"0a5115e988de8e8a9",filters:"16c:16c,17c:17c,18c:18c,19c:19c,20c:20c,21c:21c,austen:Jane Austen,canterbury:Canterbury,churches:Churches,dickens:Dickens",icon:!0,tooltip:"Click to search the site"}),e("sl-button",{id:"info-button",onClick:this._showInfoPopup.bind(this),title:"Image info"},e("sl-icon",{name:"info"}))))),e("ve-contact",{contact:this.contact})]}get el(){return i(this)}static get watchers(){return{_manifest:["_manifestChanged"],_imageInfo:["_imageInfoChanged"],_imgUrl:["_imgUrlChanged"]}}};l.style=":host{font-family:Roboto, sans-serif;display:block;font-size:1rem;width:100%;background-repeat:no-repeat;background-size:cover;background-position:center;position:relative;margin:0;z-index:3;margin-top:-1rem;color:#444;max-height:220px}:host ul{display:none}:host(.sticky){position:sticky;position:-webkit-sticky;top:-114px}.title-panel{display:flex;flex-direction:column;justify-content:center;gap:4px;font-family:Roboto, sans-serif;position:absolute;height:90px;background:rgba(0, 0, 0, 0.3);border-radius:3px;box-shadow:rgba(0, 0, 0, 0.35) 0px 5px 15px;color:white;padding:.5rem 3.2rem .5rem .5rem;font-weight:bold;left:0;bottom:0;right:0}.title-buttons{display:flex;flex-direction:row;position:absolute;right:20px}#info-button::part(base){background-color:white}#info-button{margin-left:10px}#info-button:hover{box-shadow:0 0 10px rgb(146, 209, 248)}#ve-search-search-button::part(base){background-color:white}.title,.subtitle{line-height:3rem}.title-panel a{text-decoration:none}.title,.subtitle{color:white}.title{font-size:1.6rem;line-height:1.8rem;padding-top:0}.subtitle{font-size:1.4rem;line-height:1.4rem}.ve-header{position:relative;height:100%}nav{display:inline-block;position:absolute;top:20px;right:12px;z-index:1;-webkit-user-select:none;user-select:none}sl-button::part(base){background-color:rgba(0, 0, 0, 0.2)}nav sl-icon{color:white;font-size:24px;font-weight:bold;cursor:pointer;padding-top:7px}nav sl-menu-item sl-icon{color:inherit;padding:0 6px 0 0;font-size:20px}nav sl-menu-item:hover sl-icon{color:inherit}#info-icon{position:absolute;font-family:serif;z-index:1;bottom:12px;right:19px;width:22px;height:22px;border-radius:50%;background-color:rgba(0, 0, 0, 0.3);color:white;text-align:center;line-height:1.4em;letter-spacing:-1px;font-weight:bold;cursor:pointer;border:2px solid rgba(255, 255, 255, 0.5)}#info-icon:hover{color:black;background-color:rgba(255, 255, 255, 0.7)}#image-info-popup{position:absolute;display:none;width:75%;max-width:300px;height:auto;max-height:500px;background:#fff;right:72px;top:8px;padding:6px;border:1px solid #444;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);border-radius:3px;overflow-y:scroll;z-index:10}:host #info-icon{visibility:hidden}:host(:hover) #info-icon{visibility:visible}@media (min-width: 481px){:host{max-height:300px}:host(.sticky){top:-158px}.title-panel{height:132px}.title-panel{height:120px;padding:1rem 5rem .5rem 2rem}nav{top:36px;right:24px}#info-icon{bottom:20px;right:31px}.title{font-size:2.5rem;line-height:2.6rem}.subtitle{font-size:2rem;line-height:2rem;min-height:1em}#menuToggle{top:28px}}";export{l as ve_header}