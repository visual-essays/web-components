import{r as e,h as t,g as s}from"./p-f5d08bd3.js";const r=class{constructor(t){e(this,t),this.filters="",this.icon=!1,this.tooltip="",this.API="AIzaSyCEoD17BDJpQxSeNpm-_vy9bJ-dHweFwEs",this.DOMAIN="https://kent-maps.online/",this.SEARCH_QUOTA_EXCEEDED_MESSAGE="Total site search quota exceeded for the day",this.NO_RESULTS_MESSAGE="No results",this.RESULTS_PER_PAGE=10,this.items=[],this.error="",this.search=!1,this.previousStart=0,this.activeFilter="all",this.filtersObject=new Object}fillFilters(){this.filtersObject.all="All";for(var e=this.filters.split(","),t=0;t<e.length;t++){var s=e[t].split(":");s[0]=s[0].replace(" ",""),this.filtersObject[s[0]]=s[1]}}doSearch(e){var t=this.el.shadowRoot.getElementById("ve-search-input").value;t=t.replace(" ","+"),this.error="",this.search=!0,null!=this.items&&0!=e||(this.items=[]),fetch(`https://www.googleapis.com/customsearch/v1?key=${this.API}&cx=${this.cx}&q=${t}&start=${e}`).then((e=>e.json())).then((e=>{this.items=this.items.concat(this.applyFilters(e.items)),null==e.queries.nextPage?(this.el.shadowRoot.getElementById("ve-search-end-of-output").style.display="none",this.el.shadowRoot.getElementById("ve-search-show-more").style.display="none"):(this.el.shadowRoot.getElementById("ve-search-end-of-output").style.display="block",this.el.shadowRoot.getElementById("ve-search-show-more").style.display="block")})).catch((()=>{this.error="searchQuotaExceeded"})).catch((e=>{console.log(e)})),this.previousStart=e,this.el.shadowRoot.getElementById("ve-search-hide-output").style.display="inline-block",this.el.shadowRoot.getElementById("ve-search-dropdown").style.display="block"}searchInputKeyPress(e){"Enter"===e.key&&this.doSearch(0)}applyFilters(e){var t=[];if("all"==this.activeFilter)return e;for(let r=0;r<e.length;r++){var s=e[r];s.link.replace(this.DOMAIN,"").startsWith(this.activeFilter)&&t.push(s)}return t}invertOutput(){"block"==this.el.shadowRoot.getElementById("ve-search-dropdown").style.display?this.hideOutput():this.showOutput()}hideOutput(){this.el.shadowRoot.getElementById("ve-search-hide-output").innerText="▼",this.el.shadowRoot.getElementById("ve-search-dropdown").style.display="none"}showOutput(){this.el.shadowRoot.getElementById("ve-search-hide-output").innerText="▲",this.el.shadowRoot.getElementById("ve-search-dropdown").style.display="block"}updateFilter(e){this.activeFilter=e,this.el.shadowRoot.getElementById("ve-search-filter-item-"+e).setAttribute("checked","true")}showSearchBar(){this.el.shadowRoot.getElementById("ve-search-bar").style.display="block",this.el.shadowRoot.getElementById("ve-search-bar-show-button").style.display="none"}displayFilters(){var e,s=[];if(this.filters.length>0)for(e in this.filtersObject)s=s.concat([t("sl-menu-item",{id:"ve-search-filter-item-"+e,value:e,onClick:this.updateFilter.bind(this,e)},this.filtersObject[e])]);else s=[t("style",{type:"text/css",innerHTML:"\n            #ve-search-input-container {\n                border-left: 1px rgb(212, 212, 216) solid;\n                border-top-left-radius: 3px;\n                border-bottom-left-radius: 3px;\n            }\n            #ve-search-filter-dropdown {\n                display: none;\n            }"})];return s}displayOutput(){var e="";if(this.search)if(0==this.items.length)e=`<p>${this.NO_RESULTS_MESSAGE}</p>`;else if("searchQuotaExceeded"==this.error)e=`<p>${this.SEARCH_QUOTA_EXCEEDED_MESSAGE}</p>`;else for(let s=0;s<this.items.length;s++){var t=this.items[s];e+=`<p id = 've-search-output-title'><a href = '${t.link}'>"${t.title}</a></p>`,e+=`<p id = 've-search-output-link'>${t.link}"</p>`}return e}displayTooltip(){var e=[t("style",{type:"text/css",id:"search-bar-style",innerHTML:"\n            #ve-search-bar {\n                display: none;\n            }"})],s=[t("sl-button",{id:"ve-search-bar-show-button",onclick:()=>this.showSearchBar()},t("sl-icon",{name:"search",label:"Search"}))];return this.tooltip.length>0?[t("sl-tooltip",{content:this.tooltip},e,s)]:[t("sl-tooltip",{content:this.tooltip,disabled:!0},e,s)]}render(){var e=[];return this.fillFilters(),e=e.concat([t("div",{id:"search-container"},t("sl-button-group",{id:"ve-search-bar"},t("sl-dropdown",{id:"ve-search-filter-dropdown"},t("sl-button",{id:"ve-search-active-filter",slot:"trigger",caret:!0},this.filtersObject[this.activeFilter]),t("sl-menu",{id:"ve-search-filter-menu"},this.displayFilters())),t("div",{id:"ve-search-input-container"},t("input",{id:"ve-search-input",type:"text",placeholder:"Search the site...",onKeyPress:this.searchInputKeyPress.bind(this)}),t("button",{id:"ve-search-hide-output",onClick:this.invertOutput.bind(this)},"▲")),t("sl-button",{id:"ve-search-search-button",onclick:this.doSearch.bind(this,0)},t("sl-icon",{name:"search",label:"Search"}))),t("div",{id:"ve-search-dropdown"},t("div",{id:"ve-search-output",innerHTML:this.displayOutput()}),t("hr",{id:"ve-search-end-of-output"}),t("button",{id:"ve-search-show-more",onClick:this.doSearch.bind(this,this.previousStart+this.RESULTS_PER_PAGE)},"Show more...")))]),this.icon&&(e=e.concat([t("div",null,this.displayTooltip())])),e}get el(){return s(this)}};r.style="#ve-search-input-container{outline:none;border:1px rgb(212, 212, 216) solid;background:white;border-left:none;border-right:none;border-radius:0px}#ve-search-input{outline:none;border:none;margin-top:5%;padding-left:10px}#ve-search-bar-show-button::part(base),#ve-search-search-button::part(base),#ve-search-filter-dropdown>sl-button::part(base){background-color:white}#ve-search-bar{width:max-content}#ve-search-bar:hover{box-shadow:0 0 10px rgb(146, 209, 248)}#ve-search-hide-output{background:none;border:none;display:none;padding-right:10px;cursor:pointer}#ve-search-dropdown{width:70%;display:none;border:1px rgb(212, 212, 216) solid;background-color:white;border-radius:3px;padding:7px;margin-top:0;position:absolute;z-index:2}#ve-search-output{margin-left:10px}#ve-search-output>*{font-family:Roboto, sans-serif}#ve-search-output-title{margin-bottom:0}#ve-search-output-title>a{text-decoration:none;color:rgb(147 179 243)}#ve-search-output-link{font-style:italic;font-size:0.8em;color:rgb(60, 131, 40);margin-top:0%}#ve-search-output-title>a:visited{color:rgb(188 140 242)}#ve-search-end-of-output{height:1px;width:99%;background-color:rgb(212, 212, 216);border:none}#ve-search-show-more{border:none;background:none;margin-left:9px;cursor:pointer}";export{r as ve_search}