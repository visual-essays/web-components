import{r as t,h as s,g as a}from"./p-f5d08bd3.js";const i=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e=class{constructor(s){t(this,s),this.show=!1}showChanged(){console.log(`show=${this.show}`),this.show?this.showContactForm():this.hideContactForm()}componentDidLoad(){this.contactDialog=this.el.shadowRoot.querySelector(".contact-dialog"),this.from=this.el.shadowRoot.getElementById("from"),this.message=this.el.shadowRoot.getElementById("message"),this.emailAlert=this.el.shadowRoot.getElementById("bad-email-alert"),this.noMessageAlert=this.el.shadowRoot.getElementById("no-message-alert"),this.contactDialog.addEventListener("sl-hide",(()=>this.show=!1)),this.show&&this.showContactForm()}hideContactForm(){this.contactDialog.hide(),this.from.value="",this.message.value="",this.emailAlert.hide(),this.noMessageAlert.hide()}showContactForm(){console.log("showContactForm"),this.contactDialog.show()}async sendmail(){let t=i.test(this.from.value);t?this.emailAlert.hide():this.emailAlert.show();let s=this.message.value.trim().length>0;if(s?this.noMessageAlert.hide():this.noMessageAlert.show(),t&&s){let t={to:this.contact,from:this.from.value,subject:"Contact Us",message:this.message.value};this.hideContactForm();let s=await fetch("https://api.visual-essays.net/sendmail/",{method:"POST",body:JSON.stringify(t)});s.ok&&console.log(await s.json())}}render(){return[s("sl-dialog",{label:"Contact Us",class:"contact-dialog"},s("sl-input",{id:"from",autofocus:!0,type:"email",label:"Email address"}),s("sl-alert",{id:"bad-email-alert",variant:"danger"},s("sl-icon",{slot:"icon",name:"exclamation-octagon"}),s("strong",null,"Invalid email address"),s("br",null),"Please fix and resubmit"),s("sl-textarea",{id:"message",label:"Message"}),s("sl-alert",{id:"no-message-alert",variant:"danger"},s("sl-icon",{slot:"icon",name:"exclamation-octagon"}),s("strong",null,"No message entered"),s("br",null)),s("sl-button",{id:"cancel",slot:"footer",onClick:this.hideContactForm.bind(this)},"Cancel"),s("sl-button",{slot:"footer",variant:"primary",onClick:this.sendmail.bind(this)},"Submit"))]}get el(){return a(this)}static get watchers(){return{show:["showChanged"]}}};e.style=":host{z-index:2}#message{margin-top:24px}";export{e as ve_contact}