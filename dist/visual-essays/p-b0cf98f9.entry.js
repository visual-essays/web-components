import{r as l,h as e,g as s}from"./p-f5d08bd3.js";import{g as a,i}from"./p-a12c2e8f.js";import"./p-7a9c1438.js";const n=class{constructor(e){l(this,e),this.condensed=!1,this._images=[]}srcChanged(l){l&&a(this.src).then((l=>this._images=[{manifest:l}]))}imagesChanged(){this._images=JSON.parse(decodeURIComponent(this.images))}parseManifest(l){let e=l.manifest,s={};if(s.id=this._value(e.id),s.label=this._value(e.label),e.summary&&(s.summary=this._value(e.summary)),e.rights&&(s.rights=e.rights),e.thumbnail&&(s.thumbnail=e.thumbnail[0].id),e.metadata){s.metadata=e.metadata.map((l=>({label:this._value(l.label)[0],value:this._value(l.value)})));let l=s.metadata.find((l=>"source_url"==l.label));s.sourceUrl=l?l.value[0]:null;let a=s.metadata.find((l=>"depicts"===l.label));a&&(s.depicts=a.value)}if(e.provider&&(s.provider=e.provider.map((l=>{let e={label:this._value(l.label),href:l.id};return l.logo&&(e.logo={src:l.logo[0].id}),e}))),e.logo&&(s.logo=e.logo.map((l=>{let e={src:"object"==typeof l?l.id||l["@id"]:l};return"object"==typeof l&&(l.width&&(e.width=l.width),l.height&&(e.height=l.height)),e}))),s.imageData=i(e),s.service=s.imageData.service&&`${(s.imageData.service[0].id||s.imageData.service[0]["@id"]).replace(/\/info\.json$/,"")}/info.json`,e.requiredStatement){let l=e.requiredStatement;s.requiredStatement={label:this._value(l.label),value:this._value(l.value)}}return e.homepage&&(s.homepage={label:e.homepage.label?this._value(e.homepage.label):e.homepage.id,href:e.homepage.id}),e.seeAlso&&(s.seeAlso=e.seeAlso.map((l=>({label:l.label?this._value(l.label):l.id,href:l.id})))),s}componentWillLoad(){this.images?this._images=JSON.parse(decodeURIComponent(this.images)):this.src&&a(this.src).then((l=>this._images=[{manifest:l}]))}_value(l,e="en"){return"object"!=typeof l||Array.isArray(l)?l:l[e]||l.none||l[Object.keys(l).sort()[0]]}onManifestIconDrag(l){var e;let s=l.target.parentElement.href;null===(e=l.dataTransfer)||void 0===e||e.setData("text/uri-list",`${s}?manifest=${s}`)}licenseBadge(l){let e={badgeWidth:88,badgeHeight:31,badgeTemplate:'https://licensebuttons.net/l/${this.rightsCode}${this.rightsCode === "publicdomain" ? "" : "/"+this.version}/${this.badgeWidth}x${this.badgeHeight}.png'},s={badgeTemplate:"https://rightsstatements.org/files/buttons/${this.rightsCode}.white.svg",backgroundColor:"318ac7"};const a=function(l,e){return new Function("return `"+l+"`;").call(e)};let i,n=l.rights,[t,r,c,o]=n.split("/").slice(2);return"creativecommons.org"===t?(c="zero"===c?"publicdomain":c,i=`<img src="${a(e.badgeTemplate,Object.assign(Object.assign({},e),{rightsCode:c,version:o}))}"/>`):"rightsstatements.org"===t&&(i=`<div style="display:inline-block;height:25px;padding:3px;background-color:#${s.backgroundColor};"><img style="height:100%;" src="${a(s.badgeTemplate,Object.assign(Object.assign({},s),{rightsCode:c}))}"/></div>`),i}render_condensed(){return this._images.map((l=>this.parseManifest(l))).map((l=>e("div",{class:"manifest condensed"},l.thumbnail?e("img",{class:"thumbnail",src:l.thumbnail}):null,e("div",{class:"lbl",style:{marginBottom:"12px;"}},l.sourceUrl?e("a",{href:l.sourceUrl,innerHTML:l.label}):l.label),l.summary?e("div",{class:"summary"},e("span",{class:"value"},l.summary)):null,l.requiredStatement?e("div",null,e("span",{class:"value",innerHTML:l.requiredStatement.value})):null,l.rights?e("div",{class:"rights"},e("a",{class:"value",href:l.rights,innerHTML:this.licenseBadge(l)})):null,l.provider?e("div",{class:"provider"},1==l.provider.length?e("div",{style:{display:"flex",alignItems:"center"}},l.provider[0].logo?e("img",{class:"logo",src:l.provider[0].logo.src,height:20}):null,e("a",{class:"value",href:l.provider[0].href,innerHTML:l.provider[0].label})):e("ul",null,l.provider.map((l=>e("li",null,l.logo?e("img",{class:"logo",src:l.logo.src,height:20}):null,e("a",{class:"value",href:l.href,innerHTML:l.label})))))):null,l.imageData.width?e("div",null,e("span",{class:"label"},"Dimensions")," ",e("span",{innerHTML:l.imageData.width.toLocaleString()})," x ",e("span",{innerHTML:l.imageData.height.toLocaleString()})):null,l.depicts?e("div",null,e("span",{class:"label"},"Depicts"),e("ul",null,l.depicts.map((l=>e("li",{innerHTML:l}))))):null,e("a",{draggable:!0,onDragStart:this.onManifestIconDrag.bind(this),href:l.id},e("img",{src:"https://avatars.githubusercontent.com/u/5812589?v=3&s=24",alt:"IIIF Manifest"})))))}render_full(){return this._images.map((l=>this.parseManifest(l))).map((l=>e("div",{class:"manifest"},e("div",{class:"manifest-id"},e("span",{class:"label"},"id"),e("a",{class:"value",href:l.id,innerHTML:l.id})),e("div",{class:"manifest-label"},e("span",{class:"label"},"label"),e("span",{class:"value"},l.label)),l.summary?e("div",{class:"summary"},e("span",{class:"label"},"summary"),e("span",{class:"value"},l.summary)):null,l.metadata?e("div",{class:"metadata"},e("span",{class:"label"},"metadata"),e("ul",null,l.metadata.map((l=>e("li",null,e("span",{class:"label"},l.label),1==l.value.length?e("span",{class:"value",innerHTML:l.value[0]}):e("ul",null,l.value.map((l=>e("li",{class:"value",innerHTML:l}))))))))):null,l.navDate?e("div",{class:"navDate"},e("span",{class:"label"},"navDate"),e("span",{class:"value"},l.navDate)):null,l.provider?e("div",{class:"provider"},e("span",{class:"label"},"provider"),1==l.provider.length?e("div",{style:{display:"flex",alignItems:"center"}},l.provider[0].logo?e("img",{class:"logo",src:l.provider[0].logo.src,height:20}):null,e("a",{class:"value",href:l.provider[0].href,innerHTML:l.provider[0].label})):e("ul",null,l.provider.map((l=>e("li",null,l.logo?e("img",{class:"logo",src:l.logo.src,height:20}):null,e("a",{class:"value",href:l.href,innerHTML:l.label})))))):null,l.homepage?e("div",{class:"homepage"},e("span",{class:"label"},"homepage"),e("a",{class:"value",href:l.homepage.href,innerHTML:l.homepage.label})):null,l.seeAlso?e("div",{class:"seeAlso"},e("span",{class:"label"},"seeAlso"),e("a",{class:"value",href:l.seeAlso[0].href,innerHTML:l.seeAlso[0].label})):null,l.logo?e("div",{class:"logo"},e("span",{class:"label"},"logo"),e("a",{class:"value",href:l.logo[0].src,innerHTML:l.logo[0].src})):null,l.rights?e("div",{class:"rights"},e("span",{class:"label"},"rights"),e("a",{class:"value",href:l.rights,innerHTML:l.rights})):null,l.requiredStatement?e("div",{class:"requiredStatement"},e("span",{class:"label"},"requiredStatement"),e("ul",null,e("li",null,l.requiredStatement.label&&l.requiredStatement.label[0]?e("span",{class:"label",innerHTML:l.requiredStatement.label}):null,e("span",{class:"value",innerHTML:l.requiredStatement.value})))):null,e("div",{class:"imageData"},e("div",null,e("span",{class:"label"},"image"),e("a",{class:"value",href:l.imageData.id,innerHTML:l.imageData.id})),e("div",null,e("span",{class:"label"},"format"),e("span",{class:"value",innerHTML:l.imageData.format})),e("div",null,e("span",{class:"label"},"width"),e("span",{class:"value",innerHTML:l.imageData.width})),e("div",null,e("span",{class:"label"},"height"),e("span",{class:"value",innerHTML:l.imageData.height}))),",",l.thumbnail?e("div",{class:"thumbnail"},e("span",{class:"label"},"thumbnail"),e("a",{class:"value",href:l.thumbnail,innerHTML:l.thumbnail})):null,l.service?e("div",{class:"service"},e("span",{class:"label"},"service"),e("a",{class:"value",href:l.service,innerHTML:l.service})):null)))}render(){return this._images?this.condensed?this.render_condensed():this.render_full():null}get el(){return s(this)}static get watchers(){return{src:["srcChanged"],images:["imagesChanged"]}}};n.style='.manifest{font-family:Roboto, sans-serif;padding:6px;z-index:100}.manifest.condensed{border:1px solid #ccc;font-size:0.9rem;color:#444}.manifest.condensed:not(:first-of-type){margin-top:1.5em}.manifest.condensed .thumbnail{max-height:60px;max-width:60px;position:relative;float:left;margin:0 9px 6px 0}.manifest>div{margin-bottom:12px}.lbl,.lbl a,.summary{font-weight:bold;line-height:1.2em;color:#444}.summary,.rights{clear:both}.summary .value{line-height:1.1em}ul{list-style:none;margin:0}.label,.value{display:inline-flex}.value{display:inline;line-height:1.2rem;overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-ms-hyphens:auto;-moz-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;color:#444}.manifest>div .label{font-weight:bold;min-width:80px;margin-right:6px}.label::after{content:":"}.logo{padding-right:6px}.manifest-id,.manifest-label,.summary,.provider,.rights,.service,.imageData div,.thumbnail{display:flex;align-items:center}.metadata>ul,.requiredStatement ul{padding-left:24px}.metadata ul li,.requiredStatement ul li{display:flex}.metadata ul ul{padding-left:0}a:link,a:visited{color:#0000EE}';export{n as ve_manifest}